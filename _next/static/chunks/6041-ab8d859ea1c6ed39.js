(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6041],{90521:function(t){t.exports=function(){"use strict";var t=function(t){var e=t.addFilter,n=t.utils,i=n.Type,r=n.isString,a=n.replaceInString,o=n.guesstimateMimeType,c=n.getExtensionFromFilename,u=n.getFilenameFromURL,l=function(t,e){return(/^[^/]+/.exec(t)||[]).pop()===e.slice(0,-2)},s=function(t,e){return t.some((function(t){return/\*$/.test(t)?l(e,t):t===e}))},h=function(t){var e="";if(r(t)){var n=u(t),i=c(n);i&&(e=o(i))}else e=t.type;return e},f=function(t,e,n){if(0===e.length)return!0;var i=h(t);return n?new Promise((function(r,a){n(t,i).then((function(t){s(e,t)?r():a()})).catch(a)})):s(e,i)},d=function(t){return function(e){return null!==t[e]&&(t[e]||e)}};return e("SET_ATTRIBUTE_TO_OPTION_MAP",(function(t){return Object.assign(t,{accept:"acceptedFileTypes"})})),e("ALLOW_HOPPER_ITEM",(function(t,e){var n=e.query;return!n("GET_ALLOW_FILE_TYPE_VALIDATION")||f(t,n("GET_ACCEPTED_FILE_TYPES"))})),e("LOAD_FILE",(function(t,e){var n=e.query;return new Promise((function(e,i){if(n("GET_ALLOW_FILE_TYPE_VALIDATION")){var r=n("GET_ACCEPTED_FILE_TYPES"),o=n("GET_FILE_VALIDATE_TYPE_DETECT_TYPE"),c=f(t,r,o),u=function(){var t=r.map(d(n("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES_MAP"))).filter((function(t){return!1!==t}));i({status:{main:n("GET_LABEL_FILE_TYPE_NOT_ALLOWED"),sub:a(n("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES"),{allTypes:t.join(", "),allButLastType:t.slice(0,-1).join(", "),lastType:t[t.length-1]})}})};if("boolean"===typeof c)return c?e(t):u();c.then((function(){e(t)})).catch(u)}else e(t)}))})),{options:{allowFileTypeValidation:[!0,i.BOOLEAN],acceptedFileTypes:[[],i.ARRAY],labelFileTypeNotAllowed:["File is of invalid type",i.STRING],fileValidateTypeLabelExpectedTypes:["Expects {allButLastType} or {lastType}",i.STRING],fileValidateTypeLabelExpectedTypesMap:[{},i.OBJECT],fileValidateTypeDetectType:[null,i.FUNCTION]}}};return"undefined"!==typeof window&&"undefined"!==typeof window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:t})),t}()},85180:function(t){t.exports=function(){"use strict";var t=function(t){return/^image/.test(t.type)},e=function(e){var n=e.addFilter,i=e.utils,r=i.Type,a=i.isFile,o=i.getNumericAspectRatioFromString,c=function(e,n){return!(!t(e.file)||!n("GET_ALLOW_IMAGE_CROP"))},u=function(t){return"object"===typeof t},l=function(t){return"number"===typeof t},s=function(t,e){return t.setMetadata("crop",Object.assign({},t.getMetadata("crop"),e))};return n("DID_CREATE_ITEM",(function(t,e){var n=e.query;t.extend("setImageCrop",(function(e){if(c(t,n)&&u(center))return t.setMetadata("crop",e),e})),t.extend("setImageCropCenter",(function(e){if(c(t,n)&&u(e))return s(t,{center:e})})),t.extend("setImageCropZoom",(function(e){if(c(t,n)&&l(e))return s(t,{zoom:Math.max(1,e)})})),t.extend("setImageCropRotation",(function(e){if(c(t,n)&&l(e))return s(t,{rotation:e})})),t.extend("setImageCropFlip",(function(e){if(c(t,n)&&u(e))return s(t,{flip:e})})),t.extend("setImageCropAspectRatio",(function(e){if(c(t,n)&&"undefined"!==typeof e){var i=t.getMetadata("crop"),r=o(e),a={center:{x:.5,y:.5},flip:i?Object.assign({},i.flip):{horizontal:!1,vertical:!1},rotation:0,zoom:1,aspectRatio:r};return t.setMetadata("crop",a),a}}))})),n("DID_LOAD_ITEM",(function(e,n){var i=n.query;return new Promise((function(n,r){var c=e.file;if(!a(c)||!t(c)||!i("GET_ALLOW_IMAGE_CROP"))return n(e);if(e.getMetadata("crop"))return n(e);var u=i("GET_IMAGE_CROP_ASPECT_RATIO");e.setMetadata("crop",{center:{x:.5,y:.5},flip:{horizontal:!1,vertical:!1},rotation:0,zoom:1,aspectRatio:u?o(u):null}),n(e)}))})),{options:{allowImageCrop:[!0,r.BOOLEAN],imageCropAspectRatio:[null,r.STRING]}}};return"undefined"!==typeof window&&"undefined"!==typeof window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:e})),e}()},72965:function(t){t.exports=function(){"use strict";var t=function(t){return/^image/.test(t.type)};function e(t){this.wrapped=t}function n(t){var n,i;function r(t,e){return new Promise((function(r,o){var c={key:t,arg:e,resolve:r,reject:o,next:null};i?i=i.next=c:(n=i=c,a(t,e))}))}function a(n,i){try{var r=t[n](i),c=r.value,u=c instanceof e;Promise.resolve(u?c.wrapped:c).then((function(t){u?a("next",t):o(r.done?"return":"normal",t)}),(function(t){a("throw",t)}))}catch(l){o("throw",l)}}function o(t,e){switch(t){case"return":n.resolve({value:e,done:!0});break;case"throw":n.reject(e);break;default:n.resolve({value:e,done:!1})}(n=n.next)?a(n.key,n.arg):i=null}this._invoke=r,"function"!==typeof t.return&&(this.return=void 0)}function i(t,e){return r(t)||a(t,e)||o()}function r(t){if(Array.isArray(t))return t}function a(t,e){var n=[],i=!0,r=!1,a=void 0;try{for(var o,c=t[Symbol.iterator]();!(i=(o=c.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(u){r=!0,a=u}finally{try{i||null==c.return||c.return()}finally{if(r)throw a}}return n}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}"function"===typeof Symbol&&Symbol.asyncIterator&&(n.prototype[Symbol.asyncIterator]=function(){return this}),n.prototype.next=function(t){return this._invoke("next",t)},n.prototype.throw=function(t){return this._invoke("throw",t)},n.prototype.return=function(t){return this._invoke("return",t)};var c=function(t,e){return h(t.x*e,t.y*e)},u=function(t,e){return h(t.x+e.x,t.y+e.y)},l=function(t){var e=Math.sqrt(t.x*t.x+t.y*t.y);return 0===e?{x:0,y:0}:h(t.x/e,t.y/e)},s=function(t,e,n){var i=Math.cos(e),r=Math.sin(e),a=h(t.x-n.x,t.y-n.y);return h(n.x+i*a.x-r*a.y,n.y+r*a.x+i*a.y)},h=function(){return{x:arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,y:arguments.length>1&&void 0!==arguments[1]?arguments[1]:0}},f=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3?arguments[3]:void 0;return"string"===typeof t?parseFloat(t)*n:"number"===typeof t?t*(i?e[i]:Math.min(e.width,e.height)):void 0},d=function(t,e,n){var i=t.borderStyle||t.lineStyle||"solid",r=t.backgroundColor||t.fontColor||"transparent",a=t.borderColor||t.lineColor||"transparent",o=f(t.borderWidth||t.lineWidth,e,n);return{"stroke-linecap":t.lineCap||"round","stroke-linejoin":t.lineJoin||"round","stroke-width":o||0,"stroke-dasharray":"string"===typeof i?"":i.map((function(t){return f(t,e,n)})).join(","),stroke:a,fill:r,opacity:t.opacity||1}},p=function(t){return null!=t},g=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=f(t.x,e,n,"width")||f(t.left,e,n,"width"),r=f(t.y,e,n,"height")||f(t.top,e,n,"height"),a=f(t.width,e,n,"width"),o=f(t.height,e,n,"height"),c=f(t.right,e,n,"width"),u=f(t.bottom,e,n,"height");return p(r)||(r=p(o)&&p(u)?e.height-o-u:u),p(i)||(i=p(a)&&p(c)?e.width-a-c:c),p(a)||(a=p(i)&&p(c)?e.width-i-c:0),p(o)||(o=p(r)&&p(u)?e.height-r-u:0),{x:i||0,y:r||0,width:a||0,height:o||0}},m=function(t){return t.map((function(t,e){return"".concat(0===e?"M":"L"," ").concat(t.x," ").concat(t.y)})).join(" ")},y=function(t,e){return Object.keys(e).forEach((function(n){return t.setAttribute(n,e[n])}))},v="http://www.w3.org/2000/svg",w=function(t,e){var n=document.createElementNS(v,t);return e&&y(n,e),n},E=function(t){return y(t,Object.assign({},t.rect,t.styles))},_=function(t){var e=t.rect.x+.5*t.rect.width,n=t.rect.y+.5*t.rect.height,i=.5*t.rect.width,r=.5*t.rect.height;return y(t,Object.assign({cx:e,cy:n,rx:i,ry:r},t.styles))},T={contain:"xMidYMid meet",cover:"xMidYMid slice"},x=function(t,e){y(t,Object.assign({},t.rect,t.styles,{preserveAspectRatio:T[e.fit]||"none"}))},I={left:"start",center:"middle",right:"end"},M=function(t,e,n,i){var r=f(e.fontSize,n,i),a=e.fontFamily||"sans-serif",o=e.fontWeight||"normal",c=I[e.textAlign]||"start";y(t,Object.assign({},t.rect,t.styles,{"stroke-width":0,"font-weight":o,"font-size":r,"font-family":a,"text-anchor":c})),t.text!==e.text&&(t.text=e.text,t.textContent=e.text.length?e.text:" ")},A=function(t,e,n,i){y(t,Object.assign({},t.rect,t.styles,{fill:"none"}));var r=t.childNodes[0],a=t.childNodes[1],o=t.childNodes[2],h=t.rect,d={x:t.rect.x+t.rect.width,y:t.rect.y+t.rect.height};if(y(r,{x1:h.x,y1:h.y,x2:d.x,y2:d.y}),e.lineDecoration){a.style.display="none",o.style.display="none";var p=l({x:d.x-h.x,y:d.y-h.y}),g=f(.05,n,i);if(-1!==e.lineDecoration.indexOf("arrow-begin")){var m=c(p,g),v=u(h,m),w=s(h,2,v),E=s(h,-2,v);y(a,{style:"display:block;",d:"M".concat(w.x,",").concat(w.y," L").concat(h.x,",").concat(h.y," L").concat(E.x,",").concat(E.y)})}if(-1!==e.lineDecoration.indexOf("arrow-end")){var _=c(p,-g),T=u(d,_),x=s(d,2,T),I=s(d,-2,T);y(o,{style:"display:block;",d:"M".concat(x.x,",").concat(x.y," L").concat(d.x,",").concat(d.y," L").concat(I.x,",").concat(I.y)})}}},R=function(t,e,n,i){y(t,Object.assign({},t.styles,{fill:"none",d:m(e.points.map((function(t){return{x:f(t.x,n,i,"width"),y:f(t.y,n,i,"height")}})))}))},b=function(t){return function(e){return w(t,{id:e.id})}},O=function(t){var e=w("g",{id:t.id,"stroke-linecap":"round","stroke-linejoin":"round"}),n=w("line");e.appendChild(n);var i=w("path");e.appendChild(i);var r=w("path");return e.appendChild(r),e},C={image:function(t){var e=w("image",{id:t.id,"stroke-linecap":"round","stroke-linejoin":"round",opacity:"0"});return e.onload=function(){e.setAttribute("opacity",t.opacity||1)},e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.src),e},rect:b("rect"),ellipse:b("ellipse"),text:b("text"),path:b("path"),line:O},P={rect:E,ellipse:_,image:x,text:M,path:R,line:A},L=function(t,e){return C[t](e)},G=function(t,e,n,i,r){"path"!==e&&(t.rect=g(n,i,r)),t.styles=d(n,i,r),P[e](t,n,i,r)},k=["x","y","left","top","right","bottom","width","height"],S=function(t){return"string"===typeof t&&/%/.test(t)?parseFloat(t)/100:t},N=function(t){var e=i(t,2),n=e[0],r=e[1],a=r.points?{}:k.reduce((function(t,e){return t[e]=S(r[e]),t}),{});return[n,Object.assign({zIndex:0},r,a)]},D=function(t,e){return t[1].zIndex>e[1].zIndex?1:t[1].zIndex<e[1].zIndex?-1:0},F=function(t){return t.utils.createView({name:"image-preview-markup",tag:"svg",ignoreRect:!0,mixins:{apis:["width","height","crop","markup","resize","dirty"]},write:function(t){var e=t.root,n=t.props;if(n.dirty){var r=n.crop,a=n.resize,o=n.markup,c=n.width,u=n.height,l=r.width,s=r.height;if(a){var h=a.size,f=h&&h.width,d=h&&h.height,p=a.mode,g=a.upscale;f&&!d&&(d=f),d&&!f&&(f=d);var m=l<f&&s<d;if(!m||m&&g){var y,v=f/l,w=d/s;"force"===p?(l=f,s=d):("cover"===p?y=Math.max(v,w):"contain"===p&&(y=Math.min(v,w)),l*=y,s*=y)}}var E={width:c,height:u};e.element.setAttribute("width",E.width),e.element.setAttribute("height",E.height);var _=Math.min(c/l,u/s);e.element.innerHTML="";var T=e.query("GET_IMAGE_PREVIEW_MARKUP_FILTER");o.filter(T).map(N).sort(D).forEach((function(t){var n=i(t,2),r=n[0],a=n[1],o=L(r,a);G(o,r,a,E,_),e.element.appendChild(o)}))}}})},U=function(t,e){return{x:t,y:e}},V=function(t,e){return t.x*e.x+t.y*e.y},z=function(t,e){return U(t.x-e.x,t.y-e.y)},j=function(t,e){return V(z(t,e),z(t,e))},B=function(t,e){return Math.sqrt(j(t,e))},W=function(t,e){var n=t,i=1.5707963267948966,r=e,a=1.5707963267948966-e,o=Math.sin(i),c=Math.sin(r),u=Math.sin(a),l=Math.cos(a),s=n/o;return U(l*(s*c),l*(s*u))},q=function(t,e){var n=t.width,i=t.height,r=W(n,e),a=W(i,e),o=U(t.x+Math.abs(r.x),t.y-Math.abs(r.y)),c=U(t.x+t.width+Math.abs(a.y),t.y+Math.abs(a.x)),u=U(t.x-Math.abs(a.y),t.y+t.height-Math.abs(a.x));return{width:B(o,c),height:B(o,u)}},H=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=t.height/t.width,r=1,a=e,o=1,c=i;c>a&&(o=(c=a)/i);var u=Math.max(r/o,a/c),l=t.width/(n*u*o);return{width:l,height:l*e}},Y=function(t,e,n,i){var r=i.x>.5?1-i.x:i.x,a=i.y>.5?1-i.y:i.y,o=2*r*t.width,c=2*a*t.height,u=q(e,n);return Math.max(u.width/o,u.height/c)},X=function(t,e){var n=t.width,i=n*e;return i>t.height&&(n=(i=t.height)/e),{x:.5*(t.width-n),y:.5*(t.height-i),width:n,height:i}},Z=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.zoom,i=e.rotation,r=e.center,a=e.aspectRatio;a||(a=t.height/t.width);var o=H(t,a,n),c={x:.5*o.width,y:.5*o.height},u={x:0,y:0,width:o.width,height:o.height,center:c},l="undefined"===typeof e.scaleToFit||e.scaleToFit,s=n*Y(t,X(u,a),i,l?r:{x:.5,y:.5});return{widthFloat:o.width/s,heightFloat:o.height/s,width:Math.round(o.width/s),height:Math.round(o.height/s)}},K={type:"spring",stiffness:.5,damping:.45,mass:10},Q=function(t){return t.utils.createView({name:"image-bitmap",ignoreRect:!0,mixins:{styles:["scaleX","scaleY"]},create:function(t){var e=t.root,n=t.props;e.appendChild(n.image)}})},J=function(t){return t.utils.createView({name:"image-canvas-wrapper",tag:"div",ignoreRect:!0,mixins:{apis:["crop","width","height"],styles:["originX","originY","translateX","translateY","scaleX","scaleY","rotateZ"],animations:{originX:K,originY:K,scaleX:K,scaleY:K,translateX:K,translateY:K,rotateZ:K}},create:function(e){var n=e.root,i=e.props;i.width=i.image.width,i.height=i.image.height,n.ref.bitmap=n.appendChildView(n.createChildView(Q(t),{image:i.image}))},write:function(t){var e=t.root,n=t.props.crop.flip,i=e.ref.bitmap;i.scaleX=n.horizontal?-1:1,i.scaleY=n.vertical?-1:1}})},$=function(t){return t.utils.createView({name:"image-clip",tag:"div",ignoreRect:!0,mixins:{apis:["crop","markup","resize","width","height","dirty","background"],styles:["width","height","opacity"],animations:{opacity:{type:"tween",duration:250}}},didWriteView:function(t){var e=t.root,n=t.props;n.background&&(e.element.style.backgroundColor=n.background)},create:function(e){var n=e.root,i=e.props;n.ref.image=n.appendChildView(n.createChildView(J(t),Object.assign({},i))),n.ref.createMarkup=function(){n.ref.markup||(n.ref.markup=n.appendChildView(n.createChildView(F(t),Object.assign({},i))))},n.ref.destroyMarkup=function(){n.ref.markup&&(n.removeChildView(n.ref.markup),n.ref.markup=null)};var r=n.query("GET_IMAGE_PREVIEW_TRANSPARENCY_INDICATOR");null!==r&&(n.element.dataset.transparencyIndicator="grid"===r?r:"color")},write:function(t){var e=t.root,n=t.props,i=t.shouldOptimize,r=n.crop,a=n.markup,o=n.resize,c=n.dirty,u=n.width,l=n.height;e.ref.image.crop=r;var s={x:0,y:0,width:u,height:l,center:{x:.5*u,y:.5*l}},h={width:e.ref.image.width,height:e.ref.image.height},f={x:r.center.x*h.width,y:r.center.y*h.height},d={x:s.center.x-h.width*r.center.x,y:s.center.y-h.height*r.center.y},p=2*Math.PI+r.rotation%(2*Math.PI),g=r.aspectRatio||h.height/h.width,m="undefined"===typeof r.scaleToFit||r.scaleToFit,y=Y(h,X(s,g),p,m?r.center:{x:.5,y:.5}),v=r.zoom*y;a&&a.length?(e.ref.createMarkup(),e.ref.markup.width=u,e.ref.markup.height=l,e.ref.markup.resize=o,e.ref.markup.dirty=c,e.ref.markup.markup=a,e.ref.markup.crop=Z(h,r)):e.ref.markup&&e.ref.destroyMarkup();var w=e.ref.image;if(i)return w.originX=null,w.originY=null,w.translateX=null,w.translateY=null,w.rotateZ=null,w.scaleX=null,void(w.scaleY=null);w.originX=f.x,w.originY=f.y,w.translateX=d.x,w.translateY=d.y,w.rotateZ=p,w.scaleX=v,w.scaleY=v}})},tt=function(t){return t.utils.createView({name:"image-preview",tag:"div",ignoreRect:!0,mixins:{apis:["image","crop","markup","resize","dirty","background"],styles:["translateY","scaleX","scaleY","opacity"],animations:{scaleX:K,scaleY:K,translateY:K,opacity:{type:"tween",duration:400}}},create:function(e){var n=e.root,i=e.props;n.ref.clip=n.appendChildView(n.createChildView($(t),{id:i.id,image:i.image,crop:i.crop,markup:i.markup,resize:i.resize,dirty:i.dirty,background:i.background}))},write:function(t){var e=t.root,n=t.props,i=t.shouldOptimize,r=e.ref.clip,a=n.image,o=n.crop,c=n.markup,u=n.resize,l=n.dirty;if(r.crop=o,r.markup=c,r.resize=u,r.dirty=l,r.opacity=i?0:1,!i&&!e.rect.element.hidden){var s=a.height/a.width,h=o.aspectRatio||s,f=e.rect.inner.width,d=e.rect.inner.height,p=e.query("GET_IMAGE_PREVIEW_HEIGHT"),g=e.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),m=e.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),y=e.query("GET_PANEL_ASPECT_RATIO"),v=e.query("GET_ALLOW_MULTIPLE");y&&!v&&(p=f*y,h=y);var w=null!==p?p:Math.max(g,Math.min(f*h,m)),E=w/h;E>f&&(w=(E=f)*h),w>d&&(w=d,E=d/h),r.width=E,r.height=w}}})},et='<svg width="500" height="200" viewBox="0 0 500 200" preserveAspectRatio="none">\n    <defs>\n        <radialGradient id="gradient-__UID__" cx=".5" cy="1.25" r="1.15">\n            <stop offset=\'50%\' stop-color=\'#000000\'/>\n            <stop offset=\'56%\' stop-color=\'#0a0a0a\'/>\n            <stop offset=\'63%\' stop-color=\'#262626\'/>\n            <stop offset=\'69%\' stop-color=\'#4f4f4f\'/>\n            <stop offset=\'75%\' stop-color=\'#808080\'/>\n            <stop offset=\'81%\' stop-color=\'#b1b1b1\'/>\n            <stop offset=\'88%\' stop-color=\'#dadada\'/>\n            <stop offset=\'94%\' stop-color=\'#f6f6f6\'/>\n            <stop offset=\'100%\' stop-color=\'#ffffff\'/>\n        </radialGradient>\n        <mask id="mask-__UID__">\n            <rect x="0" y="0" width="500" height="200" fill="url(#gradient-__UID__)"></rect>\n        </mask>\n    </defs>\n    <rect x="0" width="500" height="200" fill="currentColor" mask="url(#mask-__UID__)"></rect>\n</svg>',nt=0,it=function(t){return t.utils.createView({name:"image-preview-overlay",tag:"div",ignoreRect:!0,create:function(t){var e=t.root,n=t.props,i=et;if(document.querySelector("base")){var r=new URL(window.location.href.replace(window.location.hash,"")).href;i=i.replace(/url\(\#/g,"url("+r+"#")}nt++,e.element.classList.add("filepond--image-preview-overlay-".concat(n.status)),e.element.innerHTML=i.replace(/__UID__/g,nt)},mixins:{styles:["opacity"],animations:{opacity:{type:"spring",mass:25}}}})},rt=function(){self.onmessage=function(t){createImageBitmap(t.data.message.file).then((function(e){self.postMessage({id:t.data.id,message:e},[e])}))}},at=function(){self.onmessage=function(t){for(var e=t.data.message.imageData,n=t.data.message.colorMatrix,i=e.data,r=i.length,a=n[0],o=n[1],c=n[2],u=n[3],l=n[4],s=n[5],h=n[6],f=n[7],d=n[8],p=n[9],g=n[10],m=n[11],y=n[12],v=n[13],w=n[14],E=n[15],_=n[16],T=n[17],x=n[18],I=n[19],M=0,A=0,R=0,b=0,O=0;M<r;M+=4)A=i[M]/255,R=i[M+1]/255,b=i[M+2]/255,O=i[M+3]/255,i[M]=Math.max(0,Math.min(255*(A*a+R*o+b*c+O*u+l),255)),i[M+1]=Math.max(0,Math.min(255*(A*s+R*h+b*f+O*d+p),255)),i[M+2]=Math.max(0,Math.min(255*(A*g+R*m+b*y+O*v+w),255)),i[M+3]=Math.max(0,Math.min(255*(A*E+R*_+b*T+O*x+I),255));self.postMessage({id:t.data.id,message:e},[e.data.buffer])}},ot=function(t,e){var n=new Image;n.onload=function(){var t=n.naturalWidth,i=n.naturalHeight;n=null,e(t,i)},n.src=t},ct={1:function(){return[1,0,0,1,0,0]},2:function(t){return[-1,0,0,1,t,0]},3:function(t,e){return[-1,0,0,-1,t,e]},4:function(t,e){return[1,0,0,-1,0,e]},5:function(){return[0,1,1,0,0,0]},6:function(t,e){return[0,1,-1,0,e,0]},7:function(t,e){return[0,-1,-1,0,e,t]},8:function(t){return[0,-1,1,0,0,t]}},ut=function(t,e,n,i){-1!==i&&t.transform.apply(t,ct[i](e,n))},lt=function(t,e,n,i){e=Math.round(e),n=Math.round(n);var r=document.createElement("canvas");r.width=e,r.height=n;var a=r.getContext("2d");if(i>=5&&i<=8){var o=[n,e];e=o[0],n=o[1]}return ut(a,e,n,i),a.drawImage(t,0,0,e,n),r},st=function(t){return/^image/.test(t.type)&&!/svg/.test(t.type)},ht=10,ft=10,dt=function(t){var e=Math.min(ht/t.width,ft/t.height),n=document.createElement("canvas"),i=n.getContext("2d"),r=n.width=Math.ceil(t.width*e),a=n.height=Math.ceil(t.height*e);i.drawImage(t,0,0,r,a);var o=null;try{o=i.getImageData(0,0,r,a).data}catch(f){return null}for(var c=o.length,u=0,l=0,s=0,h=0;h<c;h+=4)u+=o[h]*o[h],l+=o[h+1]*o[h+1],s+=o[h+2]*o[h+2];return{r:u=pt(u,c),g:l=pt(l,c),b:s=pt(s,c)}},pt=function(t,e){return Math.floor(Math.sqrt(t/(e/4)))},gt=function(t,e){return(e=e||document.createElement("canvas")).width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0),e},mt=function(t){var e;try{e=new ImageData(t.width,t.height)}catch(n){e=document.createElement("canvas").getContext("2d").createImageData(t.width,t.height)}return e.data.set(new Uint8ClampedArray(t.data)),e},yt=function(t){return new Promise((function(e,n){var i=new Image;i.crossOrigin="Anonymous",i.onload=function(){e(i)},i.onerror=function(t){n(t)},i.src=t}))},vt=function(t){var e=it(t),n=tt(t),i=t.utils.createWorker,r=function(t,e,n){return new Promise((function(r){t.ref.imageData||(t.ref.imageData=n.getContext("2d").getImageData(0,0,n.width,n.height));var a=mt(t.ref.imageData);if(!e||20!==e.length)return n.getContext("2d").putImageData(a,0,0),r();var o=i(at);o.post({imageData:a,colorMatrix:e},(function(t){n.getContext("2d").putImageData(t,0,0),o.terminate(),r()}),[a.data.buffer])}))},a=function(t,e){t.removeChildView(e),e.image.width=1,e.image.height=1,e._destroy()},o=function(t){var e=t.root,n=e.ref.images.shift();return n.opacity=0,n.translateY=-15,e.ref.imageViewBin.push(n),n},c=function(t){var e=t.root,i=t.props,r=t.image,a=i.id,o=e.query("GET_ITEM",{id:a});if(o){var c,u,l=o.getMetadata("crop")||{center:{x:.5,y:.5},flip:{horizontal:!1,vertical:!1},zoom:1,rotation:0,aspectRatio:null},s=e.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR"),h=!1;e.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(c=o.getMetadata("markup")||[],u=o.getMetadata("resize"),h=!0);var f=e.appendChildView(e.createChildView(n,{id:a,image:r,crop:l,resize:u,markup:c,dirty:h,background:s,opacity:0,scaleX:1.15,scaleY:1.15,translateY:15}),e.childViews.length);e.ref.images.push(f),f.opacity=1,f.scaleX=1,f.scaleY=1,f.translateY=0,setTimeout((function(){e.dispatch("DID_IMAGE_PREVIEW_SHOW",{id:a})}),250)}},u=function(t){var e=t.root,n=t.props,i=e.query("GET_ITEM",{id:n.id});if(i){var r=e.ref.images[e.ref.images.length-1];r.crop=i.getMetadata("crop"),r.background=e.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR"),e.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(r.dirty=!0,r.resize=i.getMetadata("resize"),r.markup=i.getMetadata("markup"))}},l=function(t){var e=t.root,n=t.props,i=t.action;if(/crop|filter|markup|resize/.test(i.change.key)&&e.ref.images.length){var a=e.query("GET_ITEM",{id:n.id});if(a)if(/filter/.test(i.change.key)){var l=e.ref.images[e.ref.images.length-1];r(e,i.change.value,l.image)}else if(/crop|markup|resize/.test(i.change.key)){var s=a.getMetadata("crop"),h=e.ref.images[e.ref.images.length-1];if(s&&s.aspectRatio&&h.crop&&h.crop.aspectRatio&&Math.abs(s.aspectRatio-h.crop.aspectRatio)>1e-5){var f=o({root:e});c({root:e,props:n,image:gt(f.image)})}else u({root:e,props:n})}}},s=function(t){var e=window.navigator.userAgent.match(/Firefox\/([0-9]+)\./);return!((e?parseInt(e[1]):null)<=58)&&"createImageBitmap"in window&&st(t)},h=function(t){var e=t.root,n=t.props.id,i=e.query("GET_ITEM",n);if(i){var r=URL.createObjectURL(i.file);ot(r,(function(t,i){e.dispatch("DID_IMAGE_PREVIEW_CALCULATE_SIZE",{id:n,width:t,height:i})}))}},f=function(t){var e=t.root,n=t.props,a=n.id,o=e.query("GET_ITEM",a);if(o){var u=URL.createObjectURL(o.file),l=function(){yt(u).then(h)},h=function(t){URL.revokeObjectURL(u);var i=(o.getMetadata("exif")||{}).orientation||-1,a=t.width,l=t.height;if(a&&l){if(i>=5&&i<=8){var s=[l,a];a=s[0],l=s[1]}var h=Math.max(1,.75*window.devicePixelRatio),f=e.query("GET_IMAGE_PREVIEW_ZOOM_FACTOR")*h,d=l/a,p=e.rect.element.width,g=e.rect.element.height,m=p,y=m*d;d>1?y=(m=Math.min(a,p*f))*d:m=(y=Math.min(l,g*f))/d;var v=lt(t,m,y,i),w=function(){var i=e.query("GET_IMAGE_PREVIEW_CALCULATE_AVERAGE_IMAGE_COLOR")?dt(data):null;o.setMetadata("color",i,!0),"close"in t&&t.close(),e.ref.overlayShadow.opacity=1,c({root:e,props:n,image:v})},E=o.getMetadata("filter");E?r(e,E,v).then(w):w()}};if(s(o.file)){var f=i(rt);f.post({file:o.file},(function(t){f.terminate(),t?h(t):l()}))}else l()}},d=function(t){var e=t.root,n=e.ref.images[e.ref.images.length-1];n.translateY=0,n.scaleX=1,n.scaleY=1,n.opacity=1},p=function(t){var e=t.root;e.ref.overlayShadow.opacity=1,e.ref.overlayError.opacity=0,e.ref.overlaySuccess.opacity=0},g=function(t){var e=t.root;e.ref.overlayShadow.opacity=.25,e.ref.overlayError.opacity=1},m=function(t){var e=t.root;e.ref.overlayShadow.opacity=.25,e.ref.overlaySuccess.opacity=1},y=function(t){var n=t.root;n.ref.images=[],n.ref.imageData=null,n.ref.imageViewBin=[],n.ref.overlayShadow=n.appendChildView(n.createChildView(e,{opacity:0,status:"idle"})),n.ref.overlaySuccess=n.appendChildView(n.createChildView(e,{opacity:0,status:"success"})),n.ref.overlayError=n.appendChildView(n.createChildView(e,{opacity:0,status:"failure"}))};return t.utils.createView({name:"image-preview-wrapper",create:y,styles:["height"],apis:["height"],destroy:function(t){t.root.ref.images.forEach((function(t){t.image.width=1,t.image.height=1}))},didWriteView:function(t){t.root.ref.images.forEach((function(t){t.dirty=!1}))},write:t.utils.createRoute({DID_IMAGE_PREVIEW_DRAW:d,DID_IMAGE_PREVIEW_CONTAINER_CREATE:h,DID_FINISH_CALCULATE_PREVIEWSIZE:f,DID_UPDATE_ITEM_METADATA:l,DID_THROW_ITEM_LOAD_ERROR:g,DID_THROW_ITEM_PROCESSING_ERROR:g,DID_THROW_ITEM_INVALID:g,DID_COMPLETE_ITEM_PROCESSING:m,DID_START_ITEM_PROCESSING:p,DID_REVERT_ITEM_PROCESSING:p},(function(t){var e=t.root,n=e.ref.imageViewBin.filter((function(t){return 0===t.opacity}));e.ref.imageViewBin=e.ref.imageViewBin.filter((function(t){return t.opacity>0})),n.forEach((function(t){return a(e,t)})),n.length=0}))})},wt=function(e){var n=e.addFilter,i=e.utils,r=i.Type,a=i.createRoute,o=i.isFile,c=vt(e);return n("CREATE_VIEW",(function(e){var n=e.is,i=e.view,r=e.query;if(n("file")&&r("GET_ALLOW_IMAGE_PREVIEW")){var u=function(e){var n=e.root,a=e.props.id,u=r("GET_ITEM",a);if(u&&o(u.file)&&!u.archived){var l=u.file;if(t(l)&&r("GET_IMAGE_PREVIEW_FILTER_ITEM")(u)){var s="createImageBitmap"in(window||{}),h=r("GET_IMAGE_PREVIEW_MAX_FILE_SIZE");if(!(!s&&h&&l.size>h)){n.ref.imagePreview=i.appendChildView(i.createChildView(c,{id:a}));var f=n.query("GET_IMAGE_PREVIEW_HEIGHT");f&&n.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:u.id,height:f});var d=!s&&l.size>r("GET_IMAGE_PREVIEW_MAX_INSTANT_PREVIEW_FILE_SIZE");n.dispatch("DID_IMAGE_PREVIEW_CONTAINER_CREATE",{id:a},d)}}}},l=function(t,e){if(t.ref.imagePreview){var n=e.id,i=t.query("GET_ITEM",{id:n});if(i){var r=t.query("GET_PANEL_ASPECT_RATIO"),a=t.query("GET_ITEM_PANEL_ASPECT_RATIO"),o=t.query("GET_IMAGE_PREVIEW_HEIGHT");if(!(r||a||o)){var c=t.ref,u=c.imageWidth,l=c.imageHeight;if(u&&l){var s=t.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),h=t.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),f=(i.getMetadata("exif")||{}).orientation||-1;if(f>=5&&f<=8){var d=[l,u];u=d[0],l=d[1]}if(!st(i.file)||t.query("GET_IMAGE_PREVIEW_UPSCALE")){var p=2048/u;u*=p,l*=p}var g=l/u,m=(i.getMetadata("crop")||{}).aspectRatio||g,y=Math.max(s,Math.min(l,h)),v=t.rect.element.width,w=Math.min(v*m,y);t.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:i.id,height:w})}}}}},s=function(t){t.root.ref.shouldRescale=!0},h=function(t){var e=t.root;"crop"===t.action.change.key&&(e.ref.shouldRescale=!0)},f=function(t){var e=t.root,n=t.action;e.ref.imageWidth=n.width,e.ref.imageHeight=n.height,e.ref.shouldRescale=!0,e.ref.shouldDrawPreview=!0,e.dispatch("KICK")};i.registerWriter(a({DID_RESIZE_ROOT:s,DID_STOP_RESIZE:s,DID_LOAD_ITEM:u,DID_IMAGE_PREVIEW_CALCULATE_SIZE:f,DID_UPDATE_ITEM_METADATA:h},(function(t){var e=t.root,n=t.props;e.ref.imagePreview&&(e.rect.element.hidden||(e.ref.shouldRescale&&(l(e,n),e.ref.shouldRescale=!1),e.ref.shouldDrawPreview&&(requestAnimationFrame((function(){requestAnimationFrame((function(){e.dispatch("DID_FINISH_CALCULATE_PREVIEWSIZE",{id:n.id})}))})),e.ref.shouldDrawPreview=!1)))})))}})),{options:{allowImagePreview:[!0,r.BOOLEAN],imagePreviewFilterItem:[function(){return!0},r.FUNCTION],imagePreviewHeight:[null,r.INT],imagePreviewMinHeight:[44,r.INT],imagePreviewMaxHeight:[256,r.INT],imagePreviewMaxFileSize:[null,r.INT],imagePreviewZoomFactor:[2,r.INT],imagePreviewUpscale:[!1,r.BOOLEAN],imagePreviewMaxInstantPreviewFileSize:[1e6,r.INT],imagePreviewTransparencyIndicator:[null,r.STRING],imagePreviewCalculateAverageImageColor:[!1,r.BOOLEAN],imagePreviewMarkupShow:[!0,r.BOOLEAN],imagePreviewMarkupFilter:[function(){return!0},r.FUNCTION]}}};return"undefined"!==typeof window&&"undefined"!==typeof window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:wt})),wt}()},63567:function(t){t.exports=function(){"use strict";var t=function(t){return/^image/.test(t.type)},e=function(t,e){var n=new Image;n.onload=function(){var t=n.naturalWidth,i=n.naturalHeight;n=null,e({width:t,height:i})},n.onerror=function(){return e(null)},n.src=t},n=function(n){var i=n.addFilter,r=n.utils.Type;return i("DID_LOAD_ITEM",(function(n,i){var r=i.query;return new Promise((function(i,a){var o=n.file;if(!t(o)||!r("GET_ALLOW_IMAGE_RESIZE"))return i(n);var c=r("GET_IMAGE_RESIZE_MODE"),u=r("GET_IMAGE_RESIZE_TARGET_WIDTH"),l=r("GET_IMAGE_RESIZE_TARGET_HEIGHT"),s=r("GET_IMAGE_RESIZE_UPSCALE");if(null===u&&null===l)return i(n);var h=null===u?l:u,f=null===l?h:l,d=URL.createObjectURL(o);e(d,(function(t){if(URL.revokeObjectURL(d),!t)return i(n);var e=t.width,r=t.height,a=(n.getMetadata("exif")||{}).orientation||-1;if(a>=5&&a<=8){var o=[r,e];e=o[0],r=o[1]}if(e===h&&r===f)return i(n);if(!s)if("cover"===c){if(e<=h||r<=f)return i(n)}else if(e<=h&&r<=h)return i(n);n.setMetadata("resize",{mode:c,upscale:s,size:{width:h,height:f}}),i(n)}))}))})),{options:{allowImageResize:[!0,r.BOOLEAN],imageResizeMode:["cover",r.STRING],imageResizeUpscale:[!0,r.BOOLEAN],imageResizeTargetWidth:[null,r.INT],imageResizeTargetHeight:[null,r.INT]}}};return"undefined"!==typeof window&&"undefined"!==typeof window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:n})),n}()},53863:function(t){t.exports=function(){"use strict";var t=function(t){return/^image/.test(t.type)},e=function(t){return t.substr(0,t.lastIndexOf("."))||t},n={jpeg:"jpg","svg+xml":"svg"},i=function(t,i){var r=e(t),a=i.split("/")[1],o=n[a]||a;return"".concat(r,".").concat(o)},r=function(t){return/jpeg|png|svg\+xml/.test(t)?t:"image/jpeg"},a=function(t){return/^image/.test(t.type)},o={1:function(){return[1,0,0,1,0,0]},2:function(t){return[-1,0,0,1,t,0]},3:function(t,e){return[-1,0,0,-1,t,e]},4:function(t,e){return[1,0,0,-1,0,e]},5:function(){return[0,1,1,0,0,0]},6:function(t,e){return[0,1,-1,0,e,0]},7:function(t,e){return[0,-1,-1,0,e,t]},8:function(t){return[0,-1,1,0,0,t]}},c=function(t,e,n){return-1===n&&(n=1),o[n](t,e)},u=function(t,e){return{x:t,y:e}},l=function(t,e){return t.x*e.x+t.y*e.y},s=function(t,e){return u(t.x-e.x,t.y-e.y)},h=function(t,e){return l(s(t,e),s(t,e))},f=function(t,e){return Math.sqrt(h(t,e))},d=function(t,e){var n=t,i=1.5707963267948966,r=e,a=1.5707963267948966-e,o=Math.sin(i),c=Math.sin(r),l=Math.sin(a),s=Math.cos(a),h=n/o;return u(s*(h*c),s*(h*l))},p=function(t,e){var n=t.width,i=t.height,r=d(n,e),a=d(i,e),o=u(t.x+Math.abs(r.x),t.y-Math.abs(r.y)),c=u(t.x+t.width+Math.abs(a.y),t.y+Math.abs(a.x)),l=u(t.x-Math.abs(a.y),t.y+t.height-Math.abs(a.x));return{width:f(o,c),height:f(o,l)}},g=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{x:.5,y:.5},r=i.x>.5?1-i.x:i.x,a=i.y>.5?1-i.y:i.y,o=2*r*t.width,c=2*a*t.height,u=p(e,n);return Math.max(u.width/o,u.height/c)},m=function(t,e){var n=t.width,i=n*e;return i>t.height&&(n=(i=t.height)/e),{x:.5*(t.width-n),y:.5*(t.height-i),width:n,height:i}},y=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=t.height/t.width,r=1,a=e,o=1,c=i;c>a&&(o=(c=a)/i);var u=Math.max(r/o,a/c),l=t.width/(n*u*o);return{width:l,height:l*e}},v=function(t){t.width=1,t.height=1,t.getContext("2d").clearRect(0,0,1,1)},w=function(t){return t&&(t.horizontal||t.vertical)},E=function(t,e,n){if(e<=1&&!w(n))return t.width=t.naturalWidth,t.height=t.naturalHeight,t;var i=document.createElement("canvas"),r=t.naturalWidth,a=t.naturalHeight,o=e>=5&&e<=8;o?(i.width=a,i.height=r):(i.width=r,i.height=a);var u=i.getContext("2d");if(e&&u.transform.apply(u,c(r,a,e)),w(n)){var l=[1,0,0,1,0,0];(!o&&n.horizontal||o&n.vertical)&&(l[0]=-1,l[4]=r),(!o&&n.vertical||o&&n.horizontal)&&(l[3]=-1,l[5]=a),u.transform.apply(u,l)}return u.drawImage(t,0,0,r,a),i},_=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=i.canvasMemoryLimit,a=i.background,o=void 0===a?null:a,c=n.zoom||1,u=E(t,e,n.flip),l={width:u.width,height:u.height},s=n.aspectRatio||l.height/l.width,h=y(l,s,c);if(r){var f=h.width*h.height;if(f>r){var d=Math.sqrt(r)/Math.sqrt(f);l.width=Math.floor(l.width*d),l.height=Math.floor(l.height*d),h=y(l,s,c)}}var p=document.createElement("canvas"),w={x:.5*h.width,y:.5*h.height},_={x:0,y:0,width:h.width,height:h.height,center:w},T="undefined"===typeof n.scaleToFit||n.scaleToFit,x=c*g(l,m(_,s),n.rotation,T?n.center:{x:.5,y:.5});p.width=Math.round(h.width/x),p.height=Math.round(h.height/x),w.x/=x,w.y/=x;var I={x:w.x-l.width*(n.center?n.center.x:.5),y:w.y-l.height*(n.center?n.center.y:.5)},M=p.getContext("2d");o&&(M.fillStyle=o,M.fillRect(0,0,p.width,p.height)),M.translate(w.x,w.y),M.rotate(n.rotation||0),M.drawImage(u,I.x-w.x,I.y-w.y,l.width,l.height);var A=M.getImageData(0,0,p.width,p.height);return v(p),A};"undefined"!==typeof window&&"undefined"!==typeof window.document&&(HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(t,e,n){var i=this.toDataURL(e,n).split(",")[1];setTimeout((function(){for(var n=atob(i),r=n.length,a=new Uint8Array(r),o=0;o<r;o++)a[o]=n.charCodeAt(o);t(new Blob([a],{type:e||"image/png"}))}))}}));var T=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new Promise((function(i){var r=n?n(t):t;Promise.resolve(r).then((function(t){t.toBlob(i,e.type,e.quality)}))}))},x=function(t,e){return R(t.x*e,t.y*e)},I=function(t,e){return R(t.x+e.x,t.y+e.y)},M=function(t){var e=Math.sqrt(t.x*t.x+t.y*t.y);return 0===e?{x:0,y:0}:R(t.x/e,t.y/e)},A=function(t,e,n){var i=Math.cos(e),r=Math.sin(e),a=R(t.x-n.x,t.y-n.y);return R(n.x+i*a.x-r*a.y,n.y+r*a.x+i*a.y)},R=function(){return{x:arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,y:arguments.length>1&&void 0!==arguments[1]?arguments[1]:0}},b=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3?arguments[3]:void 0;return"string"===typeof t?parseFloat(t)*n:"number"===typeof t?t*(i?e[i]:Math.min(e.width,e.height)):void 0},O=function(t,e,n){var i=t.borderStyle||t.lineStyle||"solid",r=t.backgroundColor||t.fontColor||"transparent",a=t.borderColor||t.lineColor||"transparent",o=b(t.borderWidth||t.lineWidth,e,n);return{"stroke-linecap":t.lineCap||"round","stroke-linejoin":t.lineJoin||"round","stroke-width":o||0,"stroke-dasharray":"string"===typeof i?"":i.map((function(t){return b(t,e,n)})).join(","),stroke:a,fill:r,opacity:t.opacity||1}},C=function(t){return null!=t},P=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=b(t.x,e,n,"width")||b(t.left,e,n,"width"),r=b(t.y,e,n,"height")||b(t.top,e,n,"height"),a=b(t.width,e,n,"width"),o=b(t.height,e,n,"height"),c=b(t.right,e,n,"width"),u=b(t.bottom,e,n,"height");return C(r)||(r=C(o)&&C(u)?e.height-o-u:u),C(i)||(i=C(a)&&C(c)?e.width-a-c:c),C(a)||(a=C(i)&&C(c)?e.width-i-c:0),C(o)||(o=C(r)&&C(u)?e.height-r-u:0),{x:i||0,y:r||0,width:a||0,height:o||0}},L=function(t){return t.map((function(t,e){return"".concat(0===e?"M":"L"," ").concat(t.x," ").concat(t.y)})).join(" ")},G=function(t,e){return Object.keys(e).forEach((function(n){return t.setAttribute(n,e[n])}))},k="http://www.w3.org/2000/svg",S=function(t,e){var n=document.createElementNS(k,t);return e&&G(n,e),n},N=function(t){return G(t,Object.assign({},t.rect,t.styles))},D=function(t){var e=t.rect.x+.5*t.rect.width,n=t.rect.y+.5*t.rect.height,i=.5*t.rect.width,r=.5*t.rect.height;return G(t,Object.assign({cx:e,cy:n,rx:i,ry:r},t.styles))},F={contain:"xMidYMid meet",cover:"xMidYMid slice"},U=function(t,e){G(t,Object.assign({},t.rect,t.styles,{preserveAspectRatio:F[e.fit]||"none"}))},V={left:"start",center:"middle",right:"end"},z=function(t,e,n,i){var r=b(e.fontSize,n,i),a=e.fontFamily||"sans-serif",o=e.fontWeight||"normal",c=V[e.textAlign]||"start";G(t,Object.assign({},t.rect,t.styles,{"stroke-width":0,"font-weight":o,"font-size":r,"font-family":a,"text-anchor":c})),t.text!==e.text&&(t.text=e.text,t.textContent=e.text.length?e.text:" ")},j=function(t,e,n,i){G(t,Object.assign({},t.rect,t.styles,{fill:"none"}));var r=t.childNodes[0],a=t.childNodes[1],o=t.childNodes[2],c=t.rect,u={x:t.rect.x+t.rect.width,y:t.rect.y+t.rect.height};if(G(r,{x1:c.x,y1:c.y,x2:u.x,y2:u.y}),e.lineDecoration){a.style.display="none",o.style.display="none";var l=M({x:u.x-c.x,y:u.y-c.y}),s=b(.05,n,i);if(-1!==e.lineDecoration.indexOf("arrow-begin")){var h=x(l,s),f=I(c,h),d=A(c,2,f),p=A(c,-2,f);G(a,{style:"display:block;",d:"M".concat(d.x,",").concat(d.y," L").concat(c.x,",").concat(c.y," L").concat(p.x,",").concat(p.y)})}if(-1!==e.lineDecoration.indexOf("arrow-end")){var g=x(l,-s),m=I(u,g),y=A(u,2,m),v=A(u,-2,m);G(o,{style:"display:block;",d:"M".concat(y.x,",").concat(y.y," L").concat(u.x,",").concat(u.y," L").concat(v.x,",").concat(v.y)})}}},B=function(t,e,n,i){G(t,Object.assign({},t.styles,{fill:"none",d:L(e.points.map((function(t){return{x:b(t.x,n,i,"width"),y:b(t.y,n,i,"height")}})))}))},W=function(t){return function(e){return S(t,{id:e.id})}},q=function(t){var e=S("g",{id:t.id,"stroke-linecap":"round","stroke-linejoin":"round"}),n=S("line");e.appendChild(n);var i=S("path");e.appendChild(i);var r=S("path");return e.appendChild(r),e},H={image:function(t){var e=S("image",{id:t.id,"stroke-linecap":"round","stroke-linejoin":"round",opacity:"0"});return e.onload=function(){e.setAttribute("opacity",t.opacity||1)},e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.src),e},rect:W("rect"),ellipse:W("ellipse"),text:W("text"),path:W("path"),line:q},Y={rect:N,ellipse:D,image:U,text:z,path:B,line:j},X=function(t,e){return H[t](e)},Z=function(t,e,n,i,r){"path"!==e&&(t.rect=P(n,i,r)),t.styles=O(n,i,r),Y[e](t,n,i,r)},K=function(t,e){return t[1].zIndex>e[1].zIndex?1:t[1].zIndex<e[1].zIndex?-1:0},Q=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;return new Promise((function(r){var a=i.background,o=void 0===a?null:a,c=new FileReader;c.onloadend=function(){var t=c.result,i=document.createElement("div");i.style.cssText="position:absolute;pointer-events:none;width:0;height:0;visibility:hidden;",i.innerHTML=t;var a=i.querySelector("svg");document.body.appendChild(i);var u=a.getBBox();i.parentNode.removeChild(i);var l=i.querySelector("title"),s=a.getAttribute("viewBox")||"",h=a.getAttribute("width")||"",f=a.getAttribute("height")||"",d=parseFloat(h)||null,p=parseFloat(f)||null,y=(h.match(/[a-z]+/)||[])[0]||"",v=(f.match(/[a-z]+/)||[])[0]||"",w=s.split(" ").map(parseFloat),E=w.length?{x:w[0],y:w[1],width:w[2],height:w[3]}:u,_=null!=d?d:E.width,T=null!=p?p:E.height;a.style.overflow="visible",a.setAttribute("width",_),a.setAttribute("height",T);var x="";if(n&&n.length){var I={width:_,height:T};x=n.sort(K).reduce((function(t,e){var n=X(e[0],e[1]);return Z(n,e[0],e[1],I),n.removeAttribute("id"),1===n.getAttribute("opacity")&&n.removeAttribute("opacity"),t+"\n"+n.outerHTML+"\n"}),""),x="\n\n<g>".concat(x.replace(/&nbsp;/g," "),"</g>\n\n")}var M=e.aspectRatio||T/_,A=_,R=A*M,b="undefined"===typeof e.scaleToFit||e.scaleToFit,O=e.center?e.center.x:.5,C=e.center?e.center.y:.5,P=g({width:_,height:T},m({width:A,height:R},M),e.rotation,b?{x:O,y:C}:{x:.5,y:.5}),L=e.zoom*P,G=e.rotation*(180/Math.PI),k={x:.5*A,y:.5*R},S={x:k.x-_*O,y:k.y-T*C},N=["rotate(".concat(G," ").concat(k.x," ").concat(k.y,")"),"translate(".concat(k.x," ").concat(k.y,")"),"scale(".concat(L,")"),"translate(".concat(-k.x," ").concat(-k.y,")"),"translate(".concat(S.x," ").concat(S.y,")")],D=e.flip&&e.flip.horizontal,F=e.flip&&e.flip.vertical,U=["scale(".concat(D?-1:1," ").concat(F?-1:1,")"),"translate(".concat(D?-_:0," ").concat(F?-T:0,")")],V='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="'.concat(A).concat(y,'" height="').concat(R).concat(v,'" \nviewBox="0 0 ').concat(A," ").concat(R,'" ').concat(o?'style="background:'+o+'" ':"",'\npreserveAspectRatio="xMinYMin"\nxmlns:xlink="http://www.w3.org/1999/xlink"\nxmlns="http://www.w3.org/2000/svg">\n\x3c!-- Generated by PQINA - https://pqina.nl/ --\x3e\n<title>').concat(l?l.textContent:"",'</title>\n<g transform="').concat(N.join(" "),'">\n<g transform="').concat(U.join(" "),'">\n').concat(a.outerHTML).concat(x,"\n</g>\n</g>\n</svg>");r(V)},c.readAsText(t)}))},J=function(t){var e;try{e=new ImageData(t.width,t.height)}catch(n){e=document.createElement("canvas").getContext("2d").createImageData(t.width,t.height)}return e.data.set(t.data),e},$=function(){var t={resize:s,filter:l},e=function(e,n){return e.forEach((function(e){n=t[e.type](n,e.data)})),n},n=function(t,n){var i=t.transforms,r=null;if(i.forEach((function(t){"filter"===t.type&&(r=t)})),r){var a=null;i.forEach((function(t){"resize"===t.type&&(a=t)})),a&&(a.data.matrix=r.data,i=i.filter((function(t){return"filter"!==t.type})))}n(e(i,t.imageData))};self.onmessage=function(t){n(t.data.message,(function(e){self.postMessage({id:t.data.id,message:e},[e.data.buffer])}))};var i=1,r=1,a=1;function o(t,e,n){var o=e[t]/255,c=e[t+1]/255,u=e[t+2]/255,l=e[t+3]/255,s=o*n[0]+c*n[1]+u*n[2]+l*n[3]+n[4],h=o*n[5]+c*n[6]+u*n[7]+l*n[8]+n[9],f=o*n[10]+c*n[11]+u*n[12]+l*n[13]+n[14],d=o*n[15]+c*n[16]+u*n[17]+l*n[18]+n[19],p=Math.max(0,s*d)+i*(1-d),g=Math.max(0,h*d)+r*(1-d),m=Math.max(0,f*d)+a*(1-d);e[t]=255*Math.max(0,Math.min(1,p)),e[t+1]=255*Math.max(0,Math.min(1,g)),e[t+2]=255*Math.max(0,Math.min(1,m))}var c=self.JSON.stringify([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]);function u(t){return self.JSON.stringify(t||[])===c}function l(t,e){if(!e||u(e))return t;for(var n=t.data,o=n.length,c=e[0],l=e[1],s=e[2],h=e[3],f=e[4],d=e[5],p=e[6],g=e[7],m=e[8],y=e[9],v=e[10],w=e[11],E=e[12],_=e[13],T=e[14],x=e[15],I=e[16],M=e[17],A=e[18],R=e[19],b=0,O=0,C=0,P=0,L=0,G=0,k=0,S=0,N=0,D=0,F=0,U=0;b<o;b+=4)G=(O=n[b]/255)*c+(C=n[b+1]/255)*l+(P=n[b+2]/255)*s+(L=n[b+3]/255)*h+f,k=O*d+C*p+P*g+L*m+y,S=O*v+C*w+P*E+L*_+T,N=O*x+C*I+P*M+L*A+R,D=Math.max(0,G*N)+i*(1-N),F=Math.max(0,k*N)+r*(1-N),U=Math.max(0,S*N)+a*(1-N),n[b]=255*Math.max(0,Math.min(1,D)),n[b+1]=255*Math.max(0,Math.min(1,F)),n[b+2]=255*Math.max(0,Math.min(1,U));return t}function s(t,e){var n=e.mode,i=void 0===n?"contain":n,r=e.upscale,a=void 0!==r&&r,c=e.width,s=e.height,h=e.matrix;if(h=!h||u(h)?null:h,!c&&!s)return l(t,h);if(null===c?c=s:null===s&&(s=c),"force"!==i){var f=c/t.width,d=s/t.height,p=1;if("cover"===i?p=Math.max(f,d):"contain"===i&&(p=Math.min(f,d)),p>1&&!1===a)return l(t,h);c=t.width*p,s=t.height*p}for(var g=t.width,m=t.height,y=Math.round(c),v=Math.round(s),w=t.data,E=new Uint8ClampedArray(y*v*4),_=g/y,T=m/v,x=Math.ceil(.5*_),I=Math.ceil(.5*T),M=0;M<v;M++)for(var A=0;A<y;A++){for(var R=4*(A+M*y),b=0,O=0,C=0,P=0,L=0,G=0,k=0,S=(M+.5)*T,N=Math.floor(M*T);N<(M+1)*T;N++)for(var D=Math.abs(S-(N+.5))/I,F=(A+.5)*_,U=D*D,V=Math.floor(A*_);V<(A+1)*_;V++){var z=Math.abs(F-(V+.5))/x,j=Math.sqrt(U+z*z);if(j>=-1&&j<=1&&(b=2*j*j*j-3*j*j+1)>0){var B=w[3+(z=4*(V+N*g))];k+=b*B,C+=b,B<255&&(b=b*B/250),P+=b*w[z],L+=b*w[z+1],G+=b*w[z+2],O+=b}}E[R]=P/O,E[R+1]=L/O,E[R+2]=G/O,E[R+3]=k/C,h&&o(R,E,h)}return{data:E,width:y,height:v}}},tt=function(t,e){if(1165519206===t.getUint32(e+4,!1)){e+=4;var n=18761===t.getUint16(e+=6,!1);e+=t.getUint32(e+4,n);var i=t.getUint16(e,n);e+=2;for(var r=0;r<i;r++)if(274===t.getUint16(e+12*r,n))return t.setUint16(e+12*r+8,1,n),!0;return!1}},et=function(t){var e=new DataView(t);if(65496!==e.getUint16(0))return null;for(var n,i,r=2,a=!1;r<e.byteLength&&(n=e.getUint16(r,!1),i=e.getUint16(r+2,!1)+2,n>=65504&&n<=65519||65534===n)&&(a||(a=tt(e,r,i)),!(r+i>e.byteLength));)r+=i;return t.slice(0,r)},nt=function(t){return new Promise((function(e){var n=new FileReader;n.onload=function(){return e(et(n.result)||null)},n.readAsArrayBuffer(t.slice(0,262144))}))},it=function(){return window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder},rt=function(t,e){var n=it();if(n){var i=new n;return i.append(t),i.getBlob(e)}return new Blob([t],{type:e})},at=function(){return Math.random().toString(36).substr(2,9)},ot=function(t){var e=new Blob(["(",t.toString(),")()"],{type:"application/javascript"}),n=URL.createObjectURL(e),i=new Worker(n),r=[];return{transfer:function(){},post:function(t,e,n){var a=at();r[a]=e,i.onmessage=function(t){var e=r[t.data.id];e&&(e(t.data.message),delete r[t.data.id])},i.postMessage({id:a,message:t},n)},terminate:function(){i.terminate(),URL.revokeObjectURL(n)}}},ct=function(t){return new Promise((function(e,n){var i=new Image;i.onload=function(){e(i)},i.onerror=function(t){n(t)},i.src=t}))},ut=function(t){return t.reduce((function(t,e){return t.then((function(t){return e().then(Array.prototype.concat.bind(t))}))}),Promise.resolve([]))},lt=function(t,e){return new Promise((function(n){var i={width:t.width,height:t.height},r=t.getContext("2d"),a=e.sort(K).map((function(t){return function(){return new Promise((function(e){ft[t[0]](r,i,t[1],e)&&e()}))}}));ut(a).then((function(){return n(t)}))}))},st=function(t,e){t.beginPath(),t.lineCap=e["stroke-linecap"],t.lineJoin=e["stroke-linejoin"],t.lineWidth=e["stroke-width"],e["stroke-dasharray"].length&&t.setLineDash(e["stroke-dasharray"].split(",")),t.fillStyle=e.fill,t.strokeStyle=e.stroke,t.globalAlpha=e.opacity||1},ht=function(t){t.fill(),t.stroke(),t.globalAlpha=1},ft={rect:function(t,e,n){var i=P(n,e),r=O(n,e);return st(t,r),t.rect(i.x,i.y,i.width,i.height),ht(t,r),!0},ellipse:function(t,e,n){var i=P(n,e),r=O(n,e);st(t,r);var a=i.x,o=i.y,c=i.width,u=i.height,l=.5522848,s=c/2*l,h=u/2*l,f=a+c,d=o+u,p=a+c/2,g=o+u/2;return t.moveTo(a,g),t.bezierCurveTo(a,g-h,p-s,o,p,o),t.bezierCurveTo(p+s,o,f,g-h,f,g),t.bezierCurveTo(f,g+h,p+s,d,p,d),t.bezierCurveTo(p-s,d,a,g+h,a,g),ht(t,r),!0},image:function(t,e,n,i){var r=P(n,e),a=O(n,e);st(t,a);var o=new Image;new URL(n.src,window.location.href).origin!==window.location.origin&&(o.crossOrigin=""),o.onload=function(){if("cover"===n.fit){var e=r.width/r.height,c=e>1?o.width:o.height*e,u=e>1?o.width/e:o.height,l=.5*o.width-.5*c,s=.5*o.height-.5*u;t.drawImage(o,l,s,c,u,r.x,r.y,r.width,r.height)}else if("contain"===n.fit){var h=Math.min(r.width/o.width,r.height/o.height),f=h*o.width,d=h*o.height,p=r.x+.5*r.width-.5*f,g=r.y+.5*r.height-.5*d;t.drawImage(o,0,0,o.width,o.height,p,g,f,d)}else t.drawImage(o,0,0,o.width,o.height,r.x,r.y,r.width,r.height);ht(t,a),i()},o.src=n.src},text:function(t,e,n){var i=P(n,e),r=O(n,e);st(t,r);var a=b(n.fontSize,e),o=n.fontFamily||"sans-serif",c=n.fontWeight||"normal",u=n.textAlign||"left";return t.font="".concat(c," ").concat(a,"px ").concat(o),t.textAlign=u,t.fillText(n.text,i.x,i.y),ht(t,r),!0},line:function(t,e,n){var i=P(n,e),r=O(n,e);st(t,r),t.beginPath();var a={x:i.x,y:i.y},o={x:i.x+i.width,y:i.y+i.height};t.moveTo(a.x,a.y),t.lineTo(o.x,o.y);var c=M({x:o.x-a.x,y:o.y-a.y}),u=.04*Math.min(e.width,e.height);if(-1!==n.lineDecoration.indexOf("arrow-begin")){var l=x(c,u),s=I(a,l),h=A(a,2,s),f=A(a,-2,s);t.moveTo(h.x,h.y),t.lineTo(a.x,a.y),t.lineTo(f.x,f.y)}if(-1!==n.lineDecoration.indexOf("arrow-end")){var d=x(c,-u),p=I(o,d),g=A(o,2,p),m=A(o,-2,p);t.moveTo(g.x,g.y),t.lineTo(o.x,o.y),t.lineTo(m.x,m.y)}return ht(t,r),!0},path:function(t,e,n){var i=O(n,e);st(t,i),t.beginPath();var r=n.points.map((function(t){return{x:b(t.x,e,1,"width"),y:b(t.y,e,1,"height")}}));t.moveTo(r[0].x,r[0].y);for(var a=r.length,o=1;o<a;o++)t.lineTo(r[o].x,r[o].y);return ht(t,i),!0}},dt=function(t){var e=document.createElement("canvas");return e.width=t.width,e.height=t.height,e.getContext("2d").putImageData(t,0,0),e},pt=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(i,r){if(!t||!a(t))return r({status:"not an image file",file:t});var o=n.stripImageHead,c=n.beforeCreateBlob,u=n.afterCreateBlob,l=n.canvasMemoryLimit,s=e.crop,h=e.size,f=e.filter,d=e.markup,p=e.output,g=e.image&&e.image.orientation?Math.max(1,Math.min(8,e.image.orientation)):null,m=p&&p.quality,y=null===m?null:m/100,w=p&&p.type||null,E=p&&p.background||null,x=[];!h||"number"!==typeof h.width&&"number"!==typeof h.height||x.push({type:"resize",data:h}),f&&20===f.length&&x.push({type:"filter",data:f});var I=function(t){var e=u?u(t):t;Promise.resolve(e).then(i)},M=function(e,n){var i=dt(e),a=d.length?lt(i,d):i;Promise.resolve(a).then((function(e){T(e,n,c).then((function(n){if(v(e),o)return I(n);nt(t).then((function(t){null!==t&&(n=new Blob([t,n.slice(20)],{type:n.type})),I(n)}))})).catch(r)}))};if(/svg/.test(t.type)&&null===w)return Q(t,s,d,{background:E}).then((function(t){i(rt(t,"image/svg+xml"))}));var A=URL.createObjectURL(t);ct(A).then((function(e){URL.revokeObjectURL(A);var n=_(e,g,s,{canvasMemoryLimit:l,background:E}),i={quality:y,type:w||t.type};if(!x.length)return M(n,i);var r=ot($);r.post({transforms:x,imageData:n},(function(t){M(J(t),i),r.terminate()}),[n.data.buffer])})).catch(r)}))};function gt(t){this.wrapped=t}function mt(t){var e,n;function i(t,i){return new Promise((function(a,o){var c={key:t,arg:i,resolve:a,reject:o,next:null};n?n=n.next=c:(e=n=c,r(t,i))}))}function r(e,n){try{var i=t[e](n),o=i.value,c=o instanceof gt;Promise.resolve(c?o.wrapped:o).then((function(t){c?r("next",t):a(i.done?"return":"normal",t)}),(function(t){r("throw",t)}))}catch(u){a("throw",u)}}function a(t,i){switch(t){case"return":e.resolve({value:i,done:!0});break;case"throw":e.reject(i);break;default:e.resolve({value:i,done:!1})}(e=e.next)?r(e.key,e.arg):n=null}this._invoke=i,"function"!==typeof t.return&&(this.return=void 0)}function yt(t,e){return vt(t)||wt(t,e)||Et()}function vt(t){if(Array.isArray(t))return t}function wt(t,e){var n=[],i=!0,r=!1,a=void 0;try{for(var o,c=t[Symbol.iterator]();!(i=(o=c.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(u){r=!0,a=u}finally{try{i||null==c.return||c.return()}finally{if(r)throw a}}return n}function Et(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}"function"===typeof Symbol&&Symbol.asyncIterator&&(mt.prototype[Symbol.asyncIterator]=function(){return this}),mt.prototype.next=function(t){return this._invoke("next",t)},mt.prototype.throw=function(t){return this._invoke("throw",t)},mt.prototype.return=function(t){return this._invoke("return",t)};var _t=["x","y","left","top","right","bottom","width","height"],Tt=function(t){return"string"===typeof t&&/%/.test(t)?parseFloat(t)/100:t},xt=function(t){var e=yt(t,2),n=e[0],i=e[1],r=i.points?{}:_t.reduce((function(t,e){return t[e]=Tt(i[e]),t}),{});return[n,Object.assign({zIndex:0},i,r)]},It=function(t){return new Promise((function(e,n){var i=new Image;i.src=URL.createObjectURL(t);var r=function(){var t=i.naturalWidth,n=i.naturalHeight;t&&n&&(URL.revokeObjectURL(i.src),clearInterval(a),e({width:t,height:n}))};i.onerror=function(t){URL.revokeObjectURL(i.src),clearInterval(a),n(t)};var a=setInterval(r,1);r()}))};"undefined"!==typeof window&&"undefined"!==typeof window.document&&(HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(t,e,n){var i=this;setTimeout((function(){for(var r=i.toDataURL(e,n).split(",")[1],a=atob(r),o=a.length,c=new Uint8Array(o);o--;)c[o]=a.charCodeAt(o);t(new Blob([c],{type:e||"image/png"}))}))}}));var Mt="undefined"!==typeof window&&"undefined"!==typeof window.document,At=Mt&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Rt=function(e){var n=e.addFilter,a=e.utils,o=a.Type,c=a.forin,u=a.getFileFromBlob,l=a.isFile,s=["crop","resize","filter","markup","output"],h=function(t){return function(e,n,i){return e(n,t?t(i):i)}},f=function(t){return null===t.aspectRatio&&0===t.rotation&&1===t.zoom&&t.center&&.5===t.center.x&&.5===t.center.y&&t.flip&&!1===t.flip.horizontal&&!1===t.flip.vertical};n("SHOULD_PREPARE_OUTPUT",(function(t,e){var n=e.query;return new Promise((function(t){t(!n("IS_ASYNC"))}))}));var d=function(e,n,i){return new Promise((function(r){if(!e("GET_ALLOW_IMAGE_TRANSFORM")||i.archived||!l(n)||!t(n))return r(!1);It(n).then((function(){var t=e("GET_IMAGE_TRANSFORM_IMAGE_FILTER");if(t){var i=t(n);if(null==i)return handleRevert(!0);if("boolean"===typeof i)return r(i);if("function"===typeof i.then)return i.then(r)}r(!0)})).catch((function(t){r(!1)}))}))};return n("DID_CREATE_ITEM",(function(t,e){var n=e.query,i=e.dispatch;n("GET_ALLOW_IMAGE_TRANSFORM")&&t.extend("requestPrepare",(function(){return new Promise((function(e,n){i("REQUEST_PREPARE_OUTPUT",{query:t.id,item:t,success:e,failure:n},!0)}))}))})),n("PREPARE_OUTPUT",(function(t,e){var n=e.query,a=e.item;return new Promise((function(e){d(n,t,a).then((function(o){if(!o)return e(t);var l=[];n("GET_IMAGE_TRANSFORM_VARIANTS_INCLUDE_ORIGINAL")&&l.push((function(){return new Promise((function(e){e({name:n("GET_IMAGE_TRANSFORM_VARIANTS_ORIGINAL_NAME"),file:t})}))})),n("GET_IMAGE_TRANSFORM_VARIANTS_INCLUDE_DEFAULT")&&l.push((function(t,e,i){return new Promise((function(r){t(e,i).then((function(t){return r({name:n("GET_IMAGE_TRANSFORM_VARIANTS_DEFAULT_NAME"),file:t})}))}))}));var d=n("GET_IMAGE_TRANSFORM_VARIANTS")||{};c(d,(function(t,e){var n=h(e);l.push((function(e,i,r){return new Promise((function(a){n(e,i,r).then((function(e){return a({name:t,file:e})}))}))}))}));var p=n("GET_IMAGE_TRANSFORM_OUTPUT_QUALITY"),g=n("GET_IMAGE_TRANSFORM_OUTPUT_QUALITY_MODE"),m=null===p?null:p/100,y=n("GET_IMAGE_TRANSFORM_OUTPUT_MIME_TYPE"),v=n("GET_IMAGE_TRANSFORM_CLIENT_TRANSFORMS")||s;a.setMetadata("output",{type:y,quality:m,client:v},!0);var w=function(t,e){return new Promise((function(a,o){var c=Object.assign({},e);Object.keys(c).filter((function(t){return"exif"!==t})).forEach((function(t){-1===v.indexOf(t)&&delete c[t]}));var l=c.resize,s=c.exif,h=c.output,d=c.crop,p=c.filter,m=c.markup,y={image:{orientation:s?s.orientation:null},output:h&&(h.type||"number"===typeof h.quality||h.background)?{type:h.type,quality:"number"===typeof h.quality?100*h.quality:null,background:h.background||n("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR")||null}:void 0,size:l&&(l.size.width||l.size.height)?Object.assign({mode:l.mode,upscale:l.upscale},l.size):void 0,crop:d&&!f(d)?Object.assign({},d):void 0,markup:m&&m.length?m.map(xt):[],filter:p};if(y.output){var w=!!h.type&&h.type!==t.type,E=/\/jpe?g$/.test(t.type),_=null!==h.quality&&E&&"always"===g;if(!(y.size||y.crop||y.filter||w||_))return a(t)}var T={beforeCreateBlob:n("GET_IMAGE_TRANSFORM_BEFORE_CREATE_BLOB"),afterCreateBlob:n("GET_IMAGE_TRANSFORM_AFTER_CREATE_BLOB"),canvasMemoryLimit:n("GET_IMAGE_TRANSFORM_CANVAS_MEMORY_LIMIT"),stripImageHead:n("GET_IMAGE_TRANSFORM_OUTPUT_STRIP_IMAGE_HEAD")};pt(t,y,T).then((function(e){var n=u(e,i(t.name,r(e.type)));a(n)})).catch(o)}))},E=l.map((function(e){return e(w,t,a.getMetadata())}));Promise.all(E).then((function(t){e(1===t.length&&null===t[0].name?t[0].file:t)}))}))}))})),{options:{allowImageTransform:[!0,o.BOOLEAN],imageTransformImageFilter:[null,o.FUNCTION],imageTransformOutputMimeType:[null,o.STRING],imageTransformOutputQuality:[null,o.INT],imageTransformOutputStripImageHead:[!0,o.BOOLEAN],imageTransformClientTransforms:[null,o.ARRAY],imageTransformOutputQualityMode:["always",o.STRING],imageTransformVariants:[null,o.OBJECT],imageTransformVariantsIncludeDefault:[!0,o.BOOLEAN],imageTransformVariantsDefaultName:[null,o.STRING],imageTransformVariantsIncludeOriginal:[!1,o.BOOLEAN],imageTransformVariantsOriginalName:["original_",o.STRING],imageTransformBeforeCreateBlob:[null,o.FUNCTION],imageTransformAfterCreateBlob:[null,o.FUNCTION],imageTransformCanvasMemoryLimit:[Mt&&At?16777216:null,o.INT],imageTransformCanvasBackgroundColor:[null,o.STRING]}}};return Mt&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:Rt})),Rt}()},6067:function(){},36208:function(){},73042:function(t,e,n){"use strict";e.Q9=e.fo=void 0;var i,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(67294),o=(i=a)&&i.__esModule?i:{default:i},c=n(66136);e.fo=c.registerPlugin,c.FileStatus;var u=(0,c.supported)(),l=["setOptions","on","off","onOnce","appendTo","insertAfter","insertBefore","isAttachedTo","replaceElement","restoreElement","destroy"];e.Q9=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.allowFilesSync=!0,n}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"componentDidMount",value:function(){var t=this;if(u){var e=Object.assign({},this.props);if(e.onupdatefiles){var n=e.onupdatefiles;e.onupdatefiles=function(e){t.allowFilesSync=!1,n(e)}}this._pond=(0,c.create)(this._element,e),Object.keys(this._pond).filter((function(t){return!l.includes(t)})).forEach((function(e){t[e]=t._pond[e]}))}}},{key:"componentWillUnmount",value:function(){this._pond&&(this._pond.destroy(),this.allowFilesSync=!0)}},{key:"shouldComponentUpdate",value:function(){return!!this.allowFilesSync||(this.allowFilesSync=!0,!1)}},{key:"componentDidUpdate",value:function(){if(this._pond){var t=Object.assign({},this.props);delete t.onupdatefiles,this._pond.setOptions(t)}}},{key:"render",value:function(){var t=this,e=this.props,n=e.id,i=e.name,r=e.className,o=e.allowMultiple,c=e.required,u=e.captureMethod,l=e.acceptedFileTypes;return(0,a.createElement)("div",{className:"filepond--wrapper"},(0,a.createElement)("input",{type:"file",name:i,id:n,accept:l,multiple:o,required:c,className:r,capture:u,ref:function(e){return t._element=e}}))}}]),e}(o.default.Component)}}]);